# Vision Assistant Pro (Визуальный помощник Pro)

**Vision Assistant Pro** — это продвинутый многомодальный ИИ-помощник для NVDA. Он использует модели Google Gemini для предоставления интеллектуального чтения с экрана, перевода, голосовой диктовки и анализа документов.

*Это дополнение было выпущено для сообщества в честь Международного дня людей с ограниченными возможностями.*

## 1. Установка и настройка

Перейдите в **Меню NVDA > Параметры > Настройки > Vision Assistant Pro**.

* **Ключ API:** Обязателен. Получите бесплатный ключ в [Google AI Studio](https://aistudio.google.com/).
* **Модель:** Выберите `gemini-2.5-flash-lite` (самая быстрая) или стандартные модели Flash.
* **Языки:** Установите исходный, целевой языки и язык ответов ИИ.
* **Автопереключение языка:** Автоматически меняет языки, если исходный текст совпадает с целевым языком.

## 2. Глобальные сочетания клавиш

Для обеспечения максимальной совместимости с раскладками ноутбуков все сочетания используют **NVDA + Control + Shift**.

| Сочетание клавиш            | Функция                   | Описание                                                                 |
|-----------------------------|---------------------------|--------------------------------------------------------------------------|
| NVDA+Ctrl+Shift+T           | Умный переводчик          | Переводит текст под курсором навигатора. Приоритет у выделенного текста.|
| NVDA+Ctrl+Shift+Y           | Перевод из буфера         | Переводит содержимое буфера обмена. **Рекомендуется для веб-браузеров**.|
| NVDA+Ctrl+Shift+S           | Умная диктовка            | Преобразует речь в текст. Нажмите один раз для начала, ещё раз для остановки и ввода.|
| NVDA+Ctrl+Shift+R           | Обработка текста          | Обобщить, исправить грамматику, объяснить или запустить **Пользовательские подсказки**.|
| NVDA+Ctrl+Shift+C           | Решение CAPTCHA           | Захватывает и автоматически решает CAPTCHA.                              |
| NVDA+Ctrl+Shift+V           | Анализ объекта            | Описывает объект навигатора с возможностью дальнейшего чата.             |
| NVDA+Ctrl+Shift+O           | Анализ всего экрана       | Анализирует компоновку и содержимое всего экрана.                        |
| NVDA+Ctrl+Shift+D           | Анализ документа          | Чат с файлами PDF/TXT/MD/PY.                                             |
| NVDA+Ctrl+Shift+F           | Распознавание из файла    | Прямое распознавание текста (OCR) из файлов изображений/PDF.            |
| NVDA+Ctrl+Shift+A           | Расшифровка аудио         | Расшифровывает файлы MP3/WAV/OGG.                                        |
| NVDA+Ctrl+Shift+L           | Последний перевод         | Повторно озвучивает последний перевод без использования API.             |
| NVDA+Ctrl+Shift+U           | Проверка обновлений       | Проверяет наличие последней версии на GitHub.                            |
| NVDA+Ctrl+Shift+I           | Отчёт о состоянии         | Озвучивает текущий статус (напр., "Загрузка...", "Бездействие").         |

## 3. Пользовательские подсказки и переменные

Создавайте команды в настройках: `Имя:Текст подсказки` (разделяйте `|` или новой строкой).

### Доступные переменные

| Переменная       | Описание                                          | Тип ввода             |
|------------------|---------------------------------------------------|-----------------------|
| `[selection]`    | Выделенный в данный момент текст                  | Текст                 |
| `[clipboard]`    | Содержимое буфера обмена                          | Текст                 |
| `[screen_obj]`   | Скриншот объекта навигатора                       | Изображение           |
| `[screen_full]`  | Скриншот всего экрана                             | Изображение           |
| `[file_ocr]`     | Выбрать изображение/PDF/TIFF (по умолчанию "Извлечь текст") | Изображение, PDF, TIFF |
| `[file_read]`    | Выбрать текстовый документ                        | TXT, Код, PDF         |
| `[file_audio]`   | Выбрать аудиофайл                                 | MP3, WAV, OGG         |

### Примеры пользовательских подсказок

* **Быстрое OCR:** `Моё OCR:[file_ocr]`
* **Перевод изображения:** `Перевод изображения:Извлеки текст с этого изображения и переведи на персидский. [file_ocr]`
* **Анализ аудио:** `Суммаризация аудио:Прослушайте эту запись и обобщите основные моменты. [file_audio]`
* **Отладчик кода:** `Отладка:Найдите ошибки в этом коде и объясните их: [selection]`

**Примечание:** Ограничение на загрузку файлов — 15 МБ. Требуется интернет. Поддерживаются многостраничные файлы TIFF.

## Изменения в версии 2.9
*   **Добавлены французский и турецкий переводы.**
*   **Форматированный просмотр:** Добавлена кнопка "Просмотр с форматированием" для отображения чата со стилями HTML.
*   **Настройка Markdown:** Добавлена опция "Очищать Markdown в чате" для просмотра необработанного вывода.
*   **Управление диалогами:** Исправлены проблемы с фокусом и предотвращено появление дублирующихся окон.
*   **Улучшения UX:** Стандартизированы диалоги выбора файлов и удалены избыточные речевые сообщения.

## Изменения в версии 2.8
* Добавлен итальянский перевод.
* **Отчёт о состоянии:** Добавлена новая команда (NVDA+Control+Shift+I) для озвучивания текущего статуса дополнения (напр., "Загрузка...", "Анализ...").
* **Экспорт в HTML:** Кнопка "Сохранить содержимое" в диалогах результатов теперь сохраняет вывод в виде форматированного HTML-файла, сохраняя стили, такие как заголовки и жирный текст.
* **Интерфейс настроек:** Улучшена компоновка панели настроек с доступной группировкой.
* **Новые модели:** Добавлена поддержка `gemini-flash-latest` и `gemini-flash-lite-latest`.
* **Языки:** Добавлен непальский язык в список поддерживаемых.
* **Логика меню обработки текста:** Исправлена критическая ошибка, из-за которой команды "Улучшить текст" не работали, если язык интерфейса NVDA был не английским.
* **Диктовка:** Улучшено определение тишины для предотвращения вывода некорректного текста при отсутствии речи на входе.
* **Настройки обновлений:** "Проверять обновления при запуске" теперь по умолчанию отключено в соответствии с политикой Магазина дополнений.
* Рефакторинг кода.

## Изменения в версии 2.7
* Структура проекта мигрирована на официальный шаблон дополнений NV Access для лучшего соответствия стандартам.
* Реализована логика автоматического повторного запроса при ошибках HTTP 429 (Превышение лимита запросов) для обеспечения надёжности в условиях высокой нагрузки.
* Оптимизированы промпты для перевода для повышения точности и лучшей обработки логики "Автопереключения языка".
* Обновлён русский перевод.

## Изменения в версии 2.6
* Добавлена поддержка русского перевода (Благодаря nvda-ru).
* Обновлены сообщения об ошибках для предоставления более детальной обратной связи по подключению.
* Язык по умолчанию для перевода изменён на английский.

## Изменения в версии 2.5
* Добавлена команда распознавания текста из файла (NVDA+Control+Shift+F).
* Добавлена кнопка "Сохранить чат" в диалоги результатов.
* Реализована полная поддержка локализации (i18n).
* Аудиообратная связь переведена на нативный модуль тонов NVDA.
* Для улучшенной обработки файлов PDF и аудио осуществлён переход на Gemini File API.
* Исправлен сбой при переводе текста, содержащего фигурные скобки.

## Изменения в версии 2.1.1
* Исправлена проблема, из-за которой переменная `[file_ocr]` некорректно работала внутри Пользовательских подсказок.

## Изменения в версии 2.1
* Все сочетания клавиш стандартизированы на использование NVDA+Control+Shift для устранения конфликтов с раскладкой ноутбука NVDA и системными горячими клавишами.

## Изменения в версии 2.0
* Реализована встроенная система автоматического обновления.
* Добавлен кеш для умного перевода для мгновенного получения ранее переведённого текста.
* Добавлена память диалога для контекстного уточнения результатов в чатах.
* Добавлена отдельная команда перевода из буфера обмена (NVDA+Control+Shift+Y).
* Оптимизированы промпты ИИ для строгого соблюдения вывода на целевом языке.
* Исправлен сбой, вызванный специальными символами во входном текста.

## Изменения в версии 1.5
* Добавлена поддержка более 20 новых языков.
* Реализован интерактивный диалог уточнения для последующих вопросов.
* Добавлена встроенная функция умной диктовки.
* Добавлена категория "Vision Assistant" в диалог "Жесты ввода" NVDA.
* Исправлены сбои COMError в определённых приложениях, таких как Firefox и Word.
* Добавлен механизм автоматического повторного запроса при ошибках сервера.

## Изменения в версии 1.0
* Первоначальный выпуск.
